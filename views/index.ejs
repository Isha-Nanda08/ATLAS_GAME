<!doctype html>

<html lang="en">

<head>

  <meta charset="UTF-8">

  <title>login page</title>

  <link rel="stylesheet" href="style/login.css">

</head>

<body>
  <section> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
    <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
    <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
    <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
    <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
    <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
    <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
    <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
    <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
    <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
    <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
    <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
    <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
    <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
    <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
    <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
    <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
    <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
    <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
    <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
    <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
    <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
    <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
    <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
    <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
    <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
    <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
    <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
    <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
    <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
    <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
    <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
    <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
    <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
    <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
    <span></span> <span></span> <span></span> <span></span> <span></span>

    <div class="signin">

      <div class="content">

        <h2>LET'S GO</h2>

        <form class="form" action="/" method="post">

          <div class="inputBox">
            <input type="text" name="userName" required> <i>username</i>
          </div>
          
          <div class="dropdown">
            <div class="dropbtn">Select Room</div>
            <div class="dropdown-content">
            <%if (locals.rooms) {%>
              <% for (var i = 0; i < locals.rooms.length; i++) { %>
                <a onclick="selectRoom('<%= i %>')" href="#"><%= locals.rooms[i].name %></a>
              <% } %>
              <select style="display: none;" name="roomId" id="roomDropdown">
                <% for (var i = 0; i < locals.rooms.length; i++) { %>
                  <option value="<%= locals.rooms[i].id %>"></option>
                <% } %>
              </select>
            <% } %>
            </div>
          </div>

          <div class="inputBox">
            <input type="text" name="password" required> <i>room password</i>
          </div>

          <button class="start" type="submit">Join</button>
          <div class="create-room-text"><a href="/createRoom">Create Room</a></div>
          <% if (locals.err) { %>
            <div class="error-text">
              <%= err %>
            </div>
          <% } %>
        </form>
      </div>
    </div>
  </section>

</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.0/socket.io.js"></script>
<script>
  const socket = io();
    socket.on('update', (data) => {
      location.reload()
    });
  function selectRoom(index) {
        var dropdown = document.getElementById('roomDropdown');
        var options = dropdown.getElementsByTagName('option');

        // Uncheck all options
        for (var i = 0; i < options.length; i++) {
            options[i].selected = false;
        }

        // Check the corresponding option
        options[index].selected = true;
  }
</script>
</html>